(()=>{"use strict";const e=window.React,t=window.wp.blocks,a=window.wp.blockEditor,l=window.wp.components,o=window.wp.element,r=window.wp.i18n,c=JSON.parse('{"UU":"chatty-forms/form"}');(0,t.registerBlockType)(c.UU,{edit:({attributes:t,setAttributes:c})=>{const{formId:n,theme:s}=t,m=(0,a.useBlockProps)(),[i,f]=(0,o.useState)([]),[h,d]=(0,o.useState)(!0);(0,o.useEffect)(()=>{wp.apiFetch({path:"/chatty-forms/v1/forms"}).then(e=>{f(e||[]),d(!1)}).catch(()=>{f([]),d(!1)})},[]);const p=[{label:(0,r.__)("â€” Select a form â€”","chatty-forms"),value:""},...i.map(e=>({label:e.title||`Form #${e.id}`,value:String(e.id)}))],_=i.find(e=>String(e.id)===String(n));return(0,e.createElement)("div",{...m},(0,e.createElement)(a.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:(0,r.__)("Form Settings","chatty-forms")},(0,e.createElement)(l.SelectControl,{label:(0,r.__)("Select Form","chatty-forms"),value:n,options:p,onChange:e=>c({formId:e})}),(0,e.createElement)(l.SelectControl,{label:(0,r.__)("Theme Mode","chatty-forms"),value:s,options:[{label:(0,r.__)("Default (from settings)","chatty-forms"),value:""},{label:"â˜€ï¸ Light",value:"light"},{label:"ðŸŒ™ Dark",value:"dark"},{label:"ðŸ”„ Auto (follows OS)",value:"auto"}],onChange:e=>c({theme:e})}))),h?(0,e.createElement)(l.Placeholder,{icon:"feedback",label:(0,r.__)("CHATTY Form","chatty-forms")},(0,e.createElement)(l.Spinner,null)):n?(0,e.createElement)("div",{className:"chatty-forms-block-preview"},(0,e.createElement)("div",{className:"chatty-forms-block-preview__header"},(0,e.createElement)("span",{className:"chatty-forms-block-preview__icon"},"ðŸ“‹"),(0,e.createElement)("span",{className:"chatty-forms-block-preview__title"},_?_.title:`Form #${n}`)),(0,e.createElement)("div",{className:"chatty-forms-block-preview__info"},(0,e.createElement)("code",null,'[chatty_form id="',n,'"',s?` theme="${s}"`:"","]"),s&&(0,e.createElement)("span",{className:"chatty-forms-block-preview__badge"},"dark"===s?"ðŸŒ™":"auto"===s?"ðŸ”„":"â˜€ï¸"," ",s))):(0,e.createElement)(l.Placeholder,{icon:"feedback",label:(0,r.__)("CHATTY Form","chatty-forms"),instructions:(0,r.__)("Select a form to display.","chatty-forms")},(0,e.createElement)(l.SelectControl,{value:n,options:p,onChange:e=>c({formId:e})})))},save:()=>null})})();